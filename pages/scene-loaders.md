# Scene Loader

For each [Scene Type](nodes/scene-type-node.md) defined in the graph there is generated a scene loader class. For example, _LevelScene_ scene type will have a corresponding `LevelSceneLoader` class.

Scene Loaders live as game objects on the [uFrame Kernel](uframe-kernel.md).

![](https://dl.dropboxusercontent.com/u/75445779/uFrame_wiki/Screenshot_103.png)

## Scene Loader and Scene Type

When a scene with the corresponding _Scene Type_ is loaded, the Scene Loader will get a reference to the _Scene Type_ instance and pass it to the `LoadScene()` method.

[todo add more info]

## Auto-generated Scene Loader

Below is an example of a loader class generated automatically for the _UISceneType_. It has two methods:

* `LoadScene()` that will be called after the scene is loaded additively by the Unity's `LoadSceneAdditively()` method. The process of loading the scene with the Unity's method is called _Instantiation_.
* `UnloadScene()` that is called right before the scene is unloaded (the scene root game object is destroyed).

Example of scene loader base class defined in  _UIScene.designer.cs_

```csharp
// ------------------------------------------------------------------------------
//  <autogenerated>
//      This code was generated by a tool.
//      Mono Runtime Version: 2.0.50727.1433
//
//      Changes to this file may cause incorrect behavior and will be lost if
//      the code is regenerated.
//  </autogenerated>
// ------------------------------------------------------------------------------

using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;

public class UISceneLoaderBase : SceneLoader<UIScene> {
    protected override IEnumerator LoadScene(UIScene scene, Action<float, string> progressDelegate) {
        yield break;
    }

    protected override IEnumerator UnloadScene(UIScene scene, Action<float, string> progressDelegate) {
        yield break;
    }
}
```

Example of using the defined settings in the `LoadScene` method.

```csharp
// This ViewModel must be added to the subsystem instances in the designer.
// See Subsystems wiki page for details.
[inject] public MenuScreenViewModel MenuScreen;

protected override IEnumerator LoadScene(UIScene scene, Action<float, string> progressDelegate) {
    MenuScreen.Width = scene.Settings.Width;
    MenuScreen.Height = scene.Settings.Height;
}
```

Using the `scene` parameter in the example above you can access members defined in the [scene type](nodes/scene-types) class.

```csharp
// Inject ViewModel that you want to update with data defined in the scene type.
[inject] public MenuScreenViewModel MenuScreen;

protected override IEnumerator LoadScene(UIScene scene, Action<float, string> progressDelegate) {
    MenuScreen.SomeProperty = scene.SomePublicField;
}
```

## Creating custom Scene Loader

You can create custom Scene Loader class by inheriting from `SceneLoader<T>`.

```csharp
public class MyCustomSceneLoader : SceneLoader<MyCustomScene> {}
```

## Accessing other types

From Scene Loader you can access any type registered in the [DI Container](di-ioc-container.md) using the `[Inject]` attribute. Those can be all [Controllers](controller.md), globaly registered [ViewModels](view-models.md), [Services](services.md) and others.
